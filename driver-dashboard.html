<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - CarGo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .dashboard-header {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .dashboard-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #27ae60;
        }

        .driver-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .rating {
            display: flex;
            justify-content: center;
            gap: 0.2rem;
            margin-top: 0.5rem;
        }

        .star {
            color: #f39c12;
            font-size: 1.2rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #e74c3c;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .panel {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .panel-header {
            background: #34495e;
            color: white;
            padding: 1rem 1.5rem;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-content {
            padding: 1.5rem;
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-size: 0.9rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .filter-group select,
        .filter-group input {
            padding: 8px;
            border: 2px solid #ecf0f1;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .job-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .job-card {
            border: 1px solid #ecf0f1;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            background: #f8f9fa;
            transition: all 0.3s;
        }

        .job-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .job-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .job-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #27ae60;
        }

        .job-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .route-info {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .route-distance {
            text-align: center;
            padding: 0.5rem;
            background: #3498db;
            color: white;
            border-radius: 4px;
            font-weight: bold;
        }

        .job-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        .current-job {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .current-job h3 {
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .job-progress {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .progress-step {
            text-align: center;
            padding: 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }

        .progress-step.completed {
            background: rgba(255,255,255,0.3);
        }

        .progress-step.active {
            background: rgba(255,255,255,0.5);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .earnings-chart {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .driver-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .job-details {
                grid-template-columns: 1fr;
            }
            
            .job-progress {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">ğŸš— CarGo - ãƒ‰ãƒ©ã‚¤ãƒãƒ¼</div>
            <div class="user-info">
                <span>å±±ç”°å¤ªéƒ æ§˜</span>
                <a href="index.html" class="btn btn-secondary">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
            </div>
        </nav>
    </header>

    <div class="main-container">
        <div class="dashboard-header">
            <h1 class="dashboard-title">ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <p>ã‚¹ã‚­ãƒæ™‚é–“ã‚’æœ‰åŠ¹æ´»ç”¨ã—ã¦å®‰å…¨ãƒ»ç¢ºå®Ÿã«åç›Šã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†</p>
            
            <div class="driver-stats">
                <div class="stat-card">
                    <div class="stat-value">4.8</div>
                    <div>è©•ä¾¡ã‚¹ã‚³ã‚¢</div>
                    <div class="rating">
                        <span class="star">â˜…</span>
                        <span class="star">â˜…</span>
                        <span class="star">â˜…</span>
                        <span class="star">â˜…</span>
                        <span class="star">â˜…</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">24</div>
                    <div>ä»Šæœˆã®å®Œäº†ä»¶æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Â¥180,000</div>
                    <div>ä»Šæœˆã®åç›Š</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">98%</div>
                    <div>å®‰å…¨é‹è»¢ã‚¹ã‚³ã‚¢</div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-success" onclick="startWork()">ğŸš— ä½œæ¥­é–‹å§‹</button>
                <button class="btn btn-primary" onclick="openModal('earningsModal')">ğŸ’° åç›Šç¢ºèª</button>
                <button class="btn btn-secondary" onclick="openModal('profileModal')">ğŸ‘¤ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</button>
                <button class="btn btn-secondary" onclick="openModal('contactModal')">ğŸ“ ãŠå•ã„åˆã‚ã›</button>
            </div>
        </div>

        <!-- ç¾åœ¨ã®ä½œæ¥­ -->
        <div class="current-job" id="currentJob" style="display: none;">
            <h3>ğŸš› ç¾åœ¨ã®è¼¸é€ä½œæ¥­</h3>
            <div class="job-progress">
                <div class="progress-step completed">
                    <div>ğŸ“</div>
                    <div>å—å–å®Œäº†</div>
                </div>
                <div class="progress-step active">
                    <div>ğŸš—</div>
                    <div>è¼¸é€ä¸­</div>
                </div>
                <div class="progress-step">
                    <div>ğŸ“</div>
                    <div>ç´è»Š</div>
                </div>
                <div class="progress-step">
                    <div>ğŸ’°</div>
                    <div>å®Œäº†</div>
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h4>ãƒˆãƒ¨ã‚¿ ãƒ—ãƒªã‚¦ã‚¹ 2019å¹´</h4>
                    <p>æ±äº¬éƒ½æ–°å®¿åŒº â†’ ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚</p>
                    <p>å ±é…¬: Â¥35,000</p>
                </div>
                <div>
                    <button class="btn btn-primary" onclick="openModal('deliveryModal')">é…é€å®Œäº†</button>
                </div>
            </div>
        </div>

        <div class="content-grid">
            <div class="panel">
                <div class="panel-header">
                    ğŸ” æ¡ˆä»¶æ¤œç´¢
                    <button class="btn btn-primary" onclick="refreshJobs()">æ›´æ–°</button>
                </div>
                <div class="panel-content">
                    <div class="search-filters">
                        <div class="filter-group">
                            <label>ã‚¨ãƒªã‚¢</label>
                            <select>
                                <option>å…¨åœ°åŸŸ</option>
                                <option>æ±äº¬éƒ½</option>
                                <option>ç¥å¥ˆå·çœŒ</option>
                                <option>åŸ¼ç‰çœŒ</option>
                                <option>åƒè‘‰çœŒ</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>è·é›¢</label>
                            <select>
                                <option>æŒ‡å®šãªã—</option>
                                <option>50kmä»¥å†…</option>
                                <option>100kmä»¥å†…</option>
                                <option>200kmä»¥å†…</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>æœ€ä½å ±é…¬</label>
                            <input type="number" placeholder="å††" value="20000">
                        </div>
                        <div class="filter-group">
                            <label>æ—¥æ™‚</label>
                            <input type="date">
                        </div>
                    </div>

                    <div class="job-list">
                        <div class="job-card">
                            <div class="job-header">
                                <div class="job-title">ãƒˆãƒ¨ã‚¿ ãƒ—ãƒªã‚¦ã‚¹ 2019å¹´</div>
                                <div class="job-price">Â¥35,000</div>
                            </div>
                            
                            <div class="route-info">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span>ğŸ“ æ±äº¬éƒ½æ–°å®¿åŒº</span>
                                    <span>ğŸ“ ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚</span>
                                </div>
                                <div class="route-distance">ç´„45km / äºˆæƒ³æ™‚é–“: 1æ™‚é–“30åˆ†</div>
                            </div>
                            
                            <div class="job-details">
                                <div class="detail-item">
                                    <span>â°</span>
                                    <span>2024/06/14 9:00å¸Œæœ›</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸ¢</span>
                                    <span>ç”°ä¸­å•†ä¼š</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸš—</span>
                                    <span>ä½ç‡ƒè²»è»Šãƒ»çŠ¶æ…‹è‰¯å¥½</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸ’³</span>
                                    <span>å³æ—¥æ”¯æ‰•ã„</span>
                                </div>
                            </div>
                            
                            <div class="job-actions">
                                <button class="btn btn-secondary" onclick="viewJobDetails('JOB001')">è©³ç´°</button>
                                <button class="btn btn-success" onclick="applyJob('JOB001')">å¿œå‹Ÿ</button>
                            </div>
                        </div>

                        <div class="job-card">
                            <div class="job-header">
                                <div class="job-title">ãƒ›ãƒ³ãƒ€ ãƒ•ã‚£ãƒƒãƒˆ 2020å¹´</div>
                                <div class="job-price">Â¥28,000</div>
                            </div>
                            
                            <div class="route-info">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span>ğŸ“ åŸ¼ç‰çœŒã•ã„ãŸã¾å¸‚</span>
                                    <span>ğŸ“ åƒè‘‰çœŒèˆ¹æ©‹å¸‚</span>
                                </div>
                                <div class="route-distance">ç´„35km / äºˆæƒ³æ™‚é–“: 1æ™‚é–“15åˆ†</div>
                            </div>
                            
                            <div class="job-details">
                                <div class="detail-item">
                                    <span>â°</span>
                                    <span>2024/06/15 14:00å¸Œæœ›</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸ¢</span>
                                    <span>ã‚«ãƒ¼ãƒ©ãƒ³ãƒ‰</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸš—</span>
                                    <span>ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã‚«ãƒ¼</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸ’³</span>
                                    <span>ç¿Œå–¶æ¥­æ—¥æ”¯æ‰•ã„</span>
                                </div>
                            </div>
                            
                            <div class="job-actions">
                                <button class="btn btn-secondary" onclick="viewJobDetails('JOB002')">è©³ç´°</button>
                                <button class="btn btn-success" onclick="applyJob('JOB002')">å¿œå‹Ÿ</button>
                            </div>
                        </div>

                        <div class="job-card">
                            <div class="job-header">
                                <div class="job-title">ãƒãƒ„ãƒ€ CX-5 2021å¹´</div>
                                <div class="job-price">Â¥45,000</div>
                            </div>
                            
                            <div class="route-info">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span>ğŸ“ æ±äº¬éƒ½æ¸‹è°·åŒº</span>
                                    <span>ğŸ“ ç¾¤é¦¬çœŒé«˜å´å¸‚</span>
                                </div>
                                <div class="route-distance">ç´„120km / äºˆæƒ³æ™‚é–“: 2æ™‚é–“30åˆ†</div>
                            </div>
                            
                            <div class="job-details">
                                <div class="detail-item">
                                    <span>â°</span>
                                    <span>2024/06/16 10:00å¸Œæœ›</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸ¢</span>
                                    <span>ã‚°ãƒ³ãƒã‚ªãƒ¼ãƒˆ</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸš—</span>
                                    <span>SUVãƒ»é«˜å¹´å¼</span>
                                </div>
                                <div class="detail-item">
                                    <span>ğŸ’³</span>
                                    <span>å³æ—¥æ”¯æ‰•ã„</span>
                                </div>
                            </div>
                            
                            <div class="job-actions">
                                <button class="btn btn-secondary" onclick="viewJobDetails('JOB003')">è©³ç´°</button>
                                <button class="btn btn-success" onclick="applyJob('JOB003')">å¿œå‹Ÿ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">ğŸ“‹ ä½œæ¥­å±¥æ­´</div>
                <div class="panel-content">
                    <div class="job-list">
                        <div style="border-bottom: 1px solid #ecf0f1; padding: 1rem 0;">
                            <h4 style="color: #27ae60;">âœ… å®Œäº†</h4>
                            <p><strong>æ—¥ç”£ ãƒãƒ¼ãƒˆ 2018å¹´</strong></p>
                            <p>æ¸¯åŒº â†’ å·å´å¸‚ | Â¥25,000</p>
                            <p style="color: #7f8c8d; font-size: 0.9rem;">2024/06/13 å®Œäº†</p>
                            <div style="margin-top: 0.5rem;">
                                <span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">è©•ä¾¡: â˜…â˜…â˜…â˜…â˜…</span>
                            </div>
                        </div>
                        
                        <div style="border-bottom: 1px solid #ecf0f1; padding: 1rem 0;">
                            <h4 style="color: #3498db;">ğŸš— é€²è¡Œä¸­</h4>
                            <p><strong>ãƒˆãƒ¨ã‚¿ ãƒ—ãƒªã‚¦ã‚¹ 2019å¹´</strong></p>
                            <p>æ–°å®¿åŒº â†’ æ¨ªæµœå¸‚ | Â¥35,000</p>
                            <p style="color: #7f8c8d; font-size: 0.9rem;">2024/06/14 è¼¸é€ä¸­</p>
                            <div style="margin-top: 0.5rem;">
                                <button class="btn btn-primary" onclick="showCurrentJob()">é€²æ—ç¢ºèª</button>
                            </div>
                        </div>
                        
                        <div style="border-bottom: 1px solid #ecf0f1; padding: 1rem 0;">
                            <h4 style="color: #f39c12;">â° äºˆå®š</h4>
                            <p><strong>ãƒ›ãƒ³ãƒ€ ãƒ•ã‚£ãƒƒãƒˆ 2020å¹´</strong></p>
                            <p>ã•ã„ãŸã¾å¸‚ â†’ èˆ¹æ©‹å¸‚ | Â¥28,000</p>
                            <p style="color: #7f8c8d; font-size: 0.9rem;">2024/06/15 14:00 é–‹å§‹äºˆå®š</p>
                        </div>
                        
                        <div style="padding: 1rem 0;">
                            <h4 style="color: #27ae60;">âœ… å®Œäº†</h4>
                            <p><strong>ã‚¹ãƒãƒ« ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚µ 2020å¹´</strong></p>
                            <p>ä¸–ç”°è°·åŒº â†’ ç«‹å·å¸‚ | Â¥30,000</p>
                            <p style="color: #7f8c8d; font-size: 0.9rem;">2024/06/12 å®Œäº†</p>
                            <div style="margin-top: 0.5rem;">
                                <span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">è©•ä¾¡: â˜…â˜…â˜…â˜…â˜†</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åç›Šãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="earningsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('earningsModal')">&times;</span>
            <h2>ğŸ’° åç›Šãƒ¬ãƒãƒ¼ãƒˆ</h2>
            
            <div class="earnings-chart">
                <h3>ä»Šæœˆã®åç›Š: Â¥180,000</h3>
                <p>å‰æœˆæ¯”: +15% â†—ï¸</p>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                    <h5 style="color: #7f8c8d; margin-bottom: 0.5rem;">ä»Šæ—¥</h5>
                    <p style="font-size: 1.3rem; font-weight: bold; color: #27ae60;">Â¥35,000</p>
                </div>
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                    <h5 style="color: #7f8c8d; margin-bottom: 0.5rem;">ä»Šé€±</h5>
                    <p style="font-size: 1.3rem; font-weight: bold; color: #3498db;">Â¥85,000</p>
                </div>
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                    <h5 style="color: #7f8c8d; margin-bottom: 0.5rem;">ä»Šæœˆ</h5>
                    <p style="font-size: 1.3rem; font-weight: bold; color: #e74c3c;">Â¥180,000</p>
                </div>
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; text-align: center;">
                    <h5 style="color: #7f8c8d; margin-bottom: 0.5rem;">ä»Šå¹´</h5>
                    <p style="font-size: 1.3rem; font-weight: bold; color: #9b59b6;">Â¥2,160,000</p>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                    <h4>å®Œäº†ä»¶æ•°</h4>
                    <p style="font-size: 1.5rem; font-weight: bold; color: #27ae60;">24ä»¶</p>
                    <p style="color: #7f8c8d; font-size: 0.9rem;">å¹³å‡: 1.2ä»¶/æ—¥</p>
                </div>
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                    <h4>å¹³å‡å ±é…¬</h4>
                    <p style="font-size: 1.5rem; font-weight: bold; color: #3498db;">Â¥7,500</p>
                    <p style="color: #7f8c8d; font-size: 0.9rem;">æœ€é«˜: Â¥45,000</p>
                </div>
            </div>
            
            <h4>ã‚¨ãƒªã‚¢åˆ¥åç›Š</h4>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                    <span>æ±äº¬éƒ½å†…</span>
                    <span style="font-weight: bold;">Â¥72,000 (40%)</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                    <span>ç¥å¥ˆå·çœŒ</span>
                    <span style="font-weight: bold;">Â¥54,000 (30%)</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                    <span>åŸ¼ç‰çœŒ</span>
                    <span style="font-weight: bold;">Â¥36,000 (20%)</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0;">
                    <span>åƒè‘‰çœŒ</span>
                    <span style="font-weight: bold;">Â¥18,000 (10%)</span>
                </div>
            </div>
            
            <h4>ãƒœãƒ¼ãƒŠã‚¹ãƒ»ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–</h4>
            <div style="background: linear-gradient(135deg, #f39c12, #e67e22); color: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <p style="font-weight: bold;">ğŸ¯ ä»Šæœˆã®ãƒœãƒ¼ãƒŠã‚¹ç²å¾—çŠ¶æ³</p>
                <p>å®‰å…¨é‹è»¢ãƒœãƒ¼ãƒŠã‚¹: Â¥10,000 âœ…</p>
                <p>20ä»¶é”æˆãƒœãƒ¼ãƒŠã‚¹: Â¥15,000 âœ…</p>
                <p>é¡§å®¢æº€è¶³åº¦ãƒœãƒ¼ãƒŠã‚¹: Â¥5,000 âœ…</p>
                <p style="margin-top: 0.5rem; font-size: 1.2rem;">åˆè¨ˆãƒœãƒ¼ãƒŠã‚¹: Â¥30,000</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <button class="btn btn-primary" onclick="downloadReport()">ğŸ“Š è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ</button>
                <button class="btn btn-success" onclick="requestPayout()">ğŸ’¸ å‡ºé‡‘ç”³è«‹</button>
            </div>
        </div>
    </div>

    <!-- é…é€å®Œäº†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="deliveryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('deliveryModal')">&times;</span>
            <h2>ğŸšš é…é€å®Œäº†å ±å‘Š</h2>
            
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <h3>ãƒˆãƒ¨ã‚¿ ãƒ—ãƒªã‚¦ã‚¹ 2019å¹´</h3>
                <p>æ±äº¬éƒ½æ–°å®¿åŒº â†’ ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚</p>
                <p>å ±é…¬: Â¥35,000</p>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">è»Šä¸¡çŠ¶æ…‹ç¢ºèª</label>
                <div style="display: flex; gap: 1rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> å¤–è¦³ç¢ºèªå®Œäº†
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> èµ°è¡Œè·é›¢è¨˜éŒ²å®Œäº†
                    </label>
                </div>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">å—å–è€…ã‚µã‚¤ãƒ³</label>
                <div style="border: 2px dashed #ccc; height: 150px; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                    <p style="color: #7f8c8d;">ã‚¿ãƒƒãƒã—ã¦ç½²åã—ã¦ãã ã•ã„</p>
                </div>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ç‰¹è¨˜äº‹é …</label>
                <textarea style="width: 100%; padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px;" placeholder="ä½•ã‹å•é¡ŒãŒã‚ã‚Œã°è¨˜å…¥ã—ã¦ãã ã•ã„"></textarea>
            </div>
            
            <button class="btn btn-success" style="width: 100%;" onclick="completeDelivery()">é…é€å®Œäº†</button>
        </div>
    </div>

    <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('profileModal')">&times;</span>
            <h2>ğŸ‘¤ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š</h2>
            
            <div style="display: grid; grid-template-columns: 100px 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="width: 100px; height: 100px; background: #ecf0f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                    ğŸ‘¤
                </div>
                <div>
                    <h3>å±±ç”°å¤ªéƒ</h3>
                    <p style="color: #7f8c8d;">ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ID: DRV-2024-0123</p>
                    <p style="color: #7f8c8d;">ç™»éŒ²æ—¥: 2024å¹´1æœˆ15æ—¥</p>
                    <div style="margin-top: 0.5rem;">
                        <span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ‰ãƒ©ã‚¤ãƒãƒ¼</span>
                    </div>
                </div>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ç¨¼åƒã‚¨ãƒªã‚¢</label>
                <select style="width: 100%; padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px;">
                    <option>æ±äº¬éƒ½ãƒ»ç¥å¥ˆå·çœŒãƒ»åŸ¼ç‰çœŒãƒ»åƒè‘‰çœŒ</option>
                    <option>æ±äº¬éƒ½ã®ã¿</option>
                    <option>é–¢æ±å…¨åŸŸ</option>
                </select>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ç¨¼åƒå¯èƒ½æ™‚é–“</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <input type="time" value="09:00" style="padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px;">
                    <input type="time" value="18:00" style="padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px;">
                </div>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">æœ€ä½å¸Œæœ›å ±é…¬</label>
                <input type="number" value="20000" style="width: 100%; padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px;" placeholder="å††">
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">è»Šä¸¡ã‚¿ã‚¤ãƒ—</label>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> è»½è‡ªå‹•è»Š
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> æ™®é€šè»Š
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> SUV
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox"> ãƒŸãƒ‹ãƒãƒ³
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox"> ãƒˆãƒ©ãƒƒã‚¯
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox"> é«˜ç´šè»Š
                    </label>
                </div>
            </div>
            
            <div style="margin-bottom: 1rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">é€šçŸ¥è¨­å®š</label>
                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> æ–°ç€æ¡ˆä»¶ã®é€šçŸ¥
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> é«˜å ±é…¬æ¡ˆä»¶ã®å„ªå…ˆé€šçŸ¥
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" checked> ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€šçŸ¥
                    </label>
                </div>
            </div>
            
            <button class="btn btn-primary" style="width: 100%;">è¨­å®šã‚’ä¿å­˜</button>
        </div>
    </div>
    
    <!-- é€£çµ¡å…ˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('contactModal')">&times;</span>
            <h2>ğŸ“ ãŠå•ã„åˆã‚ã›</h2>
            
            <div style="display: grid; gap: 1rem; margin-bottom: 1rem;">
                <button class="btn btn-primary" style="width: 100%; padding: 1rem;" onclick="callSupport()">
                    ğŸ“ ã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼ã«é›»è©±<br>
                    <small>0120-XXX-XXXX (24æ™‚é–“å¯¾å¿œ)</small>
                </button>
                
                <button class="btn btn-success" style="width: 100%; padding: 1rem;" onclick="openChat()">
                    ğŸ’¬ ãƒãƒ£ãƒƒãƒˆã‚µãƒãƒ¼ãƒˆ<br>
                    <small>å¹³å‡å¿œç­”æ™‚é–“: 2åˆ†</small>
                </button>
                
                <button class="btn btn-secondary" style="width: 100%; padding: 1rem;" onclick="sendEmail()">
                    âœ‰ï¸ ãƒ¡ãƒ¼ãƒ«ã§å•ã„åˆã‚ã›<br>
                    <small>support@cargo.jp</small>
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                <h4>ã‚ˆãã‚ã‚‹è³ªå•</h4>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 0.5rem 0; border-bottom: 1px solid #ecf0f1;">
                        <a href="#" style="color: #3498db; text-decoration: none;">å ±é…¬ã®æ”¯æ‰•ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦</a>
                    </li>
                    <li style="padding: 0.5rem 0; border-bottom: 1px solid #ecf0f1;">
                        <a href="#" style="color: #3498db; text-decoration: none;">äº‹æ•…ãƒ»ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã®å¯¾å¿œ</a>
                    </li>
                    <li style="padding: 0.5rem 0; border-bottom: 1px solid #ecf0f1;">
                        <a href="#" style="color: #3498db; text-decoration: none;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒãƒªã‚·ãƒ¼</a>
                    </li>
                    <li style="padding: 0.5rem 0;">
                        <a href="#" style="color: #3498db; text-decoration: none;">ä¿é™ºã«ã¤ã„ã¦</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentJobData = null;
        let jobsData = [
            {
                id: 'JOB001',
                title: 'ãƒˆãƒ¨ã‚¿ ãƒ—ãƒªã‚¦ã‚¹ 2019å¹´',
                price: 35000,
                from: 'æ±äº¬éƒ½æ–°å®¿åŒº',
                to: 'ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚',
                distance: '45km',
                time: '1æ™‚é–“30åˆ†',
                date: '2024/06/14 9:00å¸Œæœ›',
                company: 'ç”°ä¸­å•†ä¼š',
                details: 'ä½ç‡ƒè²»è»Šãƒ»çŠ¶æ…‹è‰¯å¥½',
                payment: 'å³æ—¥æ”¯æ‰•ã„',
                status: 'available'
            },
            {
                id: 'JOB002',
                title: 'ãƒ›ãƒ³ãƒ€ ãƒ•ã‚£ãƒƒãƒˆ 2020å¹´',
                price: 28000,
                from: 'åŸ¼ç‰çœŒã•ã„ãŸã¾å¸‚',
                to: 'åƒè‘‰çœŒèˆ¹æ©‹å¸‚',
                distance: '35km',
                time: '1æ™‚é–“15åˆ†',
                date: '2024/06/15 14:00å¸Œæœ›',
                company: 'ã‚«ãƒ¼ãƒ©ãƒ³ãƒ‰',
                details: 'ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã‚«ãƒ¼',
                payment: 'ç¿Œå–¶æ¥­æ—¥æ”¯æ‰•ã„',
                status: 'available'
            },
            {
                id: 'JOB003',
                title: 'ãƒãƒ„ãƒ€ CX-5 2021å¹´',
                price: 45000,
                from: 'æ±äº¬éƒ½æ¸‹è°·åŒº',
                to: 'ç¾¤é¦¬çœŒé«˜å´å¸‚',
                distance: '120km',
                time: '2æ™‚é–“30åˆ†',
                date: '2024/06/16 10:00å¸Œæœ›',
                company: 'ã‚°ãƒ³ãƒã‚ªãƒ¼ãƒˆ',
                details: 'SUVãƒ»é«˜å¹´å¼',
                payment: 'å³æ—¥æ”¯æ‰•ã„',
                status: 'available'
            }
        ];
        
        let earnings = {
            today: 35000,
            week: 180000,
            month: 180000,
            completedJobs: 24,
            avgReward: 7500
        };

        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢æ•°
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            if (modalId === 'earningsModal') {
                updateEarningsChart();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ä½œæ¥­é–‹å§‹
        function startWork() {
            const currentJob = document.getElementById('currentJob');
            currentJob.style.display = 'block';
            currentJob.scrollIntoView({ behavior: 'smooth' });
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
            currentJob.style.opacity = '0';
            setTimeout(() => {
                currentJob.style.transition = 'opacity 0.5s';
                currentJob.style.opacity = '1';
            }, 100);
            
            showToast('ä½œæ¥­ã‚’é–‹å§‹ã—ã¾ã—ãŸï¼å®‰å…¨é‹è»¢ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚', 'success');
            
            // GPSè¿½è·¡ã‚’é–‹å§‹
            startGPSTracking();
        }

        // ç¾åœ¨ã®ä»•äº‹ã‚’è¡¨ç¤º
        function showCurrentJob() {
            const currentJob = document.getElementById('currentJob');
            currentJob.style.display = 'block';
            currentJob.scrollIntoView({ behavior: 'smooth' });
        }

        // ä»•äº‹ã«å¿œå‹Ÿ
        function applyJob(jobId) {
            const job = jobsData.find(j => j.id === jobId);
            if (!job) return;
            
            // å¿œå‹Ÿç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
            const confirmApply = confirm(`
                ${job.title}ã«å¿œå‹Ÿã—ã¾ã™ã‹ï¼Ÿ
                
                ãƒ«ãƒ¼ãƒˆ: ${job.from} â†’ ${job.to}
                è·é›¢: ${job.distance}
                å ±é…¬: Â¥${job.price.toLocaleString()}
                å¸Œæœ›æ—¥æ™‚: ${job.date}
            `);
            
            if (confirmApply) {
                showToast(`${job.title}ã«å¿œå‹Ÿã—ã¾ã—ãŸï¼`, 'info');
                
                // å¿œå‹Ÿãƒœã‚¿ãƒ³ã‚’å¤‰æ›´
                const applyBtn = event.target;
                applyBtn.textContent = 'å¿œå‹Ÿæ¸ˆã¿';
                applyBtn.disabled = true;
                applyBtn.style.background = '#95a5a6';
                
                // 2ç§’å¾Œã«æ‰¿èªé€šçŸ¥
                setTimeout(() => {
                    showToast('å¿œå‹ŸãŒæ‰¿èªã•ã‚Œã¾ã—ãŸï¼è©³ç´°ã‚’ç¢ºèªã—ã¦ä½œæ¥­ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚', 'success');
                    updateJobHistory(job);
                }, 2000);
            }
        }

        // ä»•äº‹ã®è©³ç´°ã‚’è¡¨ç¤º
        function viewJobDetails(jobId) {
            const job = jobsData.find(j => j.id === jobId);
            if (!job) return;
            
            const detailsModal = document.createElement('div');
            detailsModal.className = 'modal';
            detailsModal.style.display = 'block';
            detailsModal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>æ¡ˆä»¶è©³ç´° - ${job.title}</h2>
                    
                    <div style="margin: 1rem 0;">
                        <h3>è»Šä¸¡æƒ…å ±</h3>
                        <p>è»Šç¨®: ${job.title}</p>
                        <p>çŠ¶æ…‹: ${job.details}</p>
                        <p>ç‰¹è¨˜äº‹é …: ã‚¨ãƒ³ã‚¸ãƒ³è‰¯å¥½ã€ç¦ç…™è»Šã€ãƒ¯ãƒ³ã‚ªãƒ¼ãƒŠãƒ¼</p>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <h3>ãƒ«ãƒ¼ãƒˆè©³ç´°</h3>
                        <p>å—å–å ´æ‰€: ${job.from} (é§è»Šå ´ã‚ã‚Š)</p>
                        <p>ç´è»Šå ´æ‰€: ${job.to} (äº‹å‰é€£çµ¡å¿…è¦)</p>
                        <p>æ¨å®šè·é›¢: ${job.distance}</p>
                        <p>æ¨å®šæ™‚é–“: ${job.time}</p>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <h3>å ±é…¬ãƒ»æ”¯æ‰•ã„</h3>
                        <p>å ±é…¬é¡: Â¥${job.price.toLocaleString()}</p>
                        <p>æ”¯æ‰•ã„: ${job.payment}</p>
                        <p>é«˜é€Ÿä»£: å®Ÿè²»æ”¯çµ¦</p>
                    </div>
                    
                    <div style="margin: 1rem 0;">
                        <h3>è·ä¸»æƒ…å ±</h3>
                        <p>ä¼šç¤¾å: ${job.company}</p>
                        <p>è©•ä¾¡: â˜…â˜…â˜…â˜…â˜† (4.5/5.0)</p>
                        <p>å–å¼•å®Ÿç¸¾: 156ä»¶</p>
                    </div>
                    
                    <button class="btn btn-success" style="width: 100%; margin-top: 1rem;" 
                            onclick="this.parentElement.parentElement.remove(); applyJob('${jobId}')">
                        ã“ã®æ¡ˆä»¶ã«å¿œå‹Ÿã™ã‚‹
                    </button>
                </div>
            `;
            document.body.appendChild(detailsModal);
        }

        // æ¡ˆä»¶ãƒªã‚¹ãƒˆã‚’æ›´æ–°
        function refreshJobs() {
            const refreshBtn = event.target;
            refreshBtn.disabled = true;
            refreshBtn.textContent = 'æ›´æ–°ä¸­...';
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const jobList = document.querySelector('.job-list');
            jobList.style.opacity = '0.5';
            
            setTimeout(() => {
                // æ–°ã—ã„æ¡ˆä»¶ã‚’è¿½åŠ 
                const newJobs = [
                    {
                        id: 'JOB004',
                        title: 'æ—¥ç”£ ã‚»ãƒ¬ãƒŠ 2022å¹´',
                        price: 42000,
                        from: 'åƒè‘‰çœŒåƒè‘‰å¸‚',
                        to: 'èŒ¨åŸçœŒã¤ãã°å¸‚',
                        distance: '65km',
                        time: '1æ™‚é–“45åˆ†',
                        date: '2024/06/14 15:00å¸Œæœ›',
                        company: 'ã¤ãã°ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚¹',
                        details: 'ãƒŸãƒ‹ãƒãƒ³ãƒ»ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã‚«ãƒ¼',
                        payment: 'å³æ—¥æ”¯æ‰•ã„',
                        status: 'available'
                    },
                    {
                        id: 'JOB005',
                        title: 'ã‚¹ã‚ºã‚­ ã‚¹ã‚¤ãƒ•ãƒˆ 2021å¹´',
                        price: 25000,
                        from: 'æ±äº¬éƒ½ç·´é¦¬åŒº',
                        to: 'æ±äº¬éƒ½å…«ç‹å­å¸‚',
                        distance: '30km',
                        time: '1æ™‚é–“',
                        date: '2024/06/14 11:00å¸Œæœ›',
                        company: 'å…«ç‹å­ã‚«ãƒ¼ã‚»ãƒ³ã‚¿ãƒ¼',
                        details: 'ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã‚«ãƒ¼ãƒ»ä½èµ°è¡Œ',
                        payment: 'ç¿Œæ—¥æ”¯æ‰•ã„',
                        status: 'available'
                    }
                ];
                
                jobsData = [...newJobs, ...jobsData];
                renderJobList();
                
                jobList.style.opacity = '1';
                refreshBtn.disabled = false;
                refreshBtn.textContent = 'æ›´æ–°';
                
                showToast(`${newJobs.length}ä»¶ã®æ–°ã—ã„æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼`, 'success');
            }, 1500);
        }

        // æ¡ˆä»¶ãƒªã‚¹ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderJobList() {
            const jobList = document.querySelector('.job-list');
            const filters = getFilters();
            
            let filteredJobs = jobsData.filter(job => {
                // ã‚¨ãƒªã‚¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (filters.area !== 'å…¨åœ°åŸŸ' && !job.from.includes(filters.area)) {
                    return false;
                }
                
                // è·é›¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (filters.distance !== 'æŒ‡å®šãªã—') {
                    const jobDistance = parseInt(job.distance);
                    const maxDistance = parseInt(filters.distance);
                    if (jobDistance > maxDistance) return false;
                }
                
                // æœ€ä½å ±é…¬ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (filters.minReward && job.price < filters.minReward) {
                    return false;
                }
                
                return true;
            });
            
            jobList.innerHTML = filteredJobs.map(job => `
                <div class="job-card">
                    <div class="job-header">
                        <div class="job-title">${job.title}</div>
                        <div class="job-price">Â¥${job.price.toLocaleString()}</div>
                    </div>
                    
                    <div class="route-info">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span>ğŸ“ ${job.from}</span>
                            <span>ğŸ“ ${job.to}</span>
                        </div>
                        <div class="route-distance">ç´„${job.distance} / äºˆæƒ³æ™‚é–“: ${job.time}</div>
                    </div>
                    
                    <div class="job-details">
                        <div class="detail-item">
                            <span>â°</span>
                            <span>${job.date}</span>
                        </div>
                        <div class="detail-item">
                            <span>ğŸ¢</span>
                            <span>${job.company}</span>
                        </div>
                        <div class="detail-item">
                            <span>ğŸš—</span>
                            <span>${job.details}</span>
                        </div>
                        <div class="detail-item">
                            <span>ğŸ’³</span>
                            <span>${job.payment}</span>
                        </div>
                    </div>
                    
                    <div class="job-actions">
                        <button class="btn btn-secondary" onclick="viewJobDetails('${job.id}')">è©³ç´°</button>
                        <button class="btn btn-success" onclick="applyJob('${job.id}')">å¿œå‹Ÿ</button>
                    </div>
                </div>
            `).join('');
            
            if (filteredJobs.length === 0) {
                jobList.innerHTML = '<p style="text-align: center; padding: 2rem; color: #7f8c8d;">æ¡ä»¶ã«åˆã†æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
            }
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å€¤ã‚’å–å¾—
        function getFilters() {
            const filters = document.querySelectorAll('.filter-group select, .filter-group input');
            return {
                area: filters[0].value,
                distance: filters[1].value,
                minReward: parseInt(filters[2].value) || 0,
                date: filters[3].value
            };
        }

        // é…é€å®Œäº†å‡¦ç†
        function completeDelivery() {
            const checkboxes = document.querySelectorAll('#deliveryModal input[type="checkbox"]');
            const allChecked = Array.from(checkboxes).every(cb => cb.checked);
            
            if (!allChecked) {
                showToast('ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯é …ç›®ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚', 'error');
                return;
            }
            
            // é…é€å®Œäº†å‡¦ç†
            earnings.today += 35000;
            earnings.month += 35000;
            earnings.completedJobs += 1;
            updateStats();
            
            showToast('é…é€å®Œäº†ï¼å ±é…¬ Â¥35,000 ãŒå³åº§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«å…¥é‡‘ã•ã‚Œã¾ã—ãŸã€‚', 'success');
            closeModal('deliveryModal');
            document.getElementById('currentJob').style.display = 'none';
            
            // å®Œäº†éŸ³ã‚’å†ç”Ÿï¼ˆå®Ÿè£…ã§ã¯å®Ÿéš›ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼‰
            playCompletionSound();
        }

        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        function updateStats() {
            document.querySelector('.stat-card:nth-child(2) .stat-value').textContent = earnings.completedJobs;
            document.querySelector('.stat-card:nth-child(3) .stat-value').textContent = `Â¥${earnings.month.toLocaleString()}`;
        }

        // åç›Šãƒãƒ£ãƒ¼ãƒˆã‚’æ›´æ–°
        function updateEarningsChart() {
            const chartContent = document.querySelector('.earnings-chart');
            chartContent.innerHTML = `
                <h3>ä»Šæœˆã®åç›Š: Â¥${earnings.month.toLocaleString()}</h3>
                <p>å‰æœˆæ¯”: +15% â†—ï¸</p>
                <canvas id="earningsCanvas" width="400" height="200" style="max-width: 100%;"></canvas>
            `;
            
            // ç°¡æ˜“çš„ãªã‚°ãƒ©ãƒ•ã‚’æç”»
            drawEarningsChart();
        }

        // åç›Šã‚°ãƒ©ãƒ•ã‚’æç”»
        function drawEarningsChart() {
            const canvas = document.getElementById('earningsCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const weeks = [45000, 52000, 48000, 35000];
            const maxValue = Math.max(...weeks);
            
            // ã‚°ãƒ©ãƒ•ã‚’æç”»
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#27ae60';
            
            weeks.forEach((value, index) => {
                const barHeight = (value / maxValue) * 150;
                const x = index * 100 + 20;
                const y = 180 - barHeight;
                
                ctx.fillRect(x, y, 80, barHeight);
                ctx.fillStyle = '#2c3e50';
                ctx.font = '12px Arial';
                ctx.fillText(`ç¬¬${index + 1}é€±`, x + 20, 195);
                ctx.fillText(`Â¥${value.toLocaleString()}`, x + 10, y - 5);
                ctx.fillStyle = '#27ae60';
            });
        }

        // ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 2rem;
                background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // GPSè¿½è·¡
        function startGPSTracking() {
            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(
                    position => {
                        console.log('ç¾åœ¨ä½ç½®:', position.coords.latitude, position.coords.longitude);
                        // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«ä½ç½®æƒ…å ±ã‚’é€ä¿¡
                    },
                    error => console.error('GPS ã‚¨ãƒ©ãƒ¼:', error),
                    { enableHighAccuracy: true, maximumAge: 30000, timeout: 27000 }
                );
            }
        }

        // å®Œäº†éŸ³ã‚’å†ç”Ÿ
        function playCompletionSound() {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨
            const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmFgU7k9n1unEiBC13yO/eizEIHWq+8+OWT' + 
                             'QwOUKvn77VlGAc7k9j1unEiBC13yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9j1unEiBC13yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9j1unEiBC13yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9j1unEiBC13yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9j1unEiBC13yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9j1unEiBC13yO/eizEIHWq+8+OWT' +
                             'QwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWTQwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWT' + 
                             'QwOUKvn77VlGAc7k9n1unAiBC14yO/eizEIHWq+8+OWTQ==');
            audio.play().catch(e => console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', e));
        }

        // ä½œæ¥­å±¥æ­´ã‚’æ›´æ–°
        function updateJobHistory(job) {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜
            console.log('ä½œæ¥­å±¥æ­´ã«è¿½åŠ :', job);
        }

        // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šã‚’ä¿å­˜
        function saveProfile() {
            const area = document.querySelector('#profileModal select').value;
            const startTime = document.querySelectorAll('#profileModal input[type="time"]')[0].value;
            const endTime = document.querySelectorAll('#profileModal input[type="time"]')[1].value;
            const minReward = document.querySelector('#profileModal input[type="number"]').value;
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜
            localStorage.setItem('driverProfile', JSON.stringify({
                area, startTime, endTime, minReward
            }));
            
            showToast('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚', 'success');
            closeModal('profileModal');
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å¤‰æ›´æ™‚ã®å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
            document.querySelectorAll('.filter-group select, .filter-group input').forEach(filter => {
                filter.addEventListener('change', renderJobList);
            });
            
            // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜ãƒœã‚¿ãƒ³
            const profileSaveBtn = document.querySelector('#profileModal .btn-primary');
            profileSaveBtn.onclick = saveProfile;
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨CSSè¿½åŠ 
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        });

        // å®šæœŸçš„ãªé€šçŸ¥
        function scheduleNotifications() {
            // 10ç§’å¾Œã«æ–°ç€æ¡ˆä»¶é€šçŸ¥
            setTimeout(() => {
                showToast('æ–°ç€æ¡ˆä»¶: é«˜å ±é…¬æ¡ˆä»¶ãŒ2ä»¶è¿½åŠ ã•ã‚Œã¾ã—ãŸï¼', 'info');
            }, 10000);
            
            // 30ç§’å¾Œã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼
            setTimeout(() => {
                if (document.getElementById('currentJob').style.display !== 'none') {
                    showToast('å®‰å…¨é‹è»¢ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„ã€‚ä¼‘æ†©ã‚‚å¤§åˆ‡ã§ã™ã€‚', 'info');
                }
            }, 30000);
        }

        // é€£çµ¡å…ˆé–¢é€£ã®é–¢æ•°
        function callSupport() {
            if (confirm('ã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼ï¼ˆ0120-XXX-XXXXï¼‰ã«é›»è©±ã‚’ã‹ã‘ã¾ã™ã‹ï¼Ÿ')) {
                showToast('é›»è©±ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...', 'info');
                // å®Ÿéš›ã®å®Ÿè£…ã§ã¯: window.location.href = 'tel:0120XXXXXXX';
            }
        }

        function openChat() {
            showToast('ãƒãƒ£ãƒƒãƒˆã‚µãƒãƒ¼ãƒˆã‚’é–‹ã„ã¦ã„ã¾ã™...', 'info');
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é–‹ã
            setTimeout(() => {
                const chatMessage = prompt('ãŠå›°ã‚Šã®ã“ã¨ã‚’ãŠèã‹ã›ãã ã•ã„ï¼š');
                if (chatMessage) {
                    showToast('ã‚µãƒãƒ¼ãƒˆã‚¹ã‚¿ãƒƒãƒ•ãŒå¯¾å¿œä¸­ã§ã™ã€‚ã¾ã‚‚ãªãè¿”ä¿¡ãŒã‚ã‚Šã¾ã™ã€‚', 'success');
                }
            }, 500);
        }

        function sendEmail() {
            showToast('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¦ã„ã¾ã™...', 'info');
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯: window.location.href = 'mailto:support@cargo.jp';
        }

        // ãƒ¬ãƒãƒ¼ãƒˆé–¢é€£ã®é–¢æ•°
        function downloadReport() {
            showToast('åç›Šãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¸­...', 'info');
            setTimeout(() => {
                showToast('ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ2024å¹´6æœˆåˆ†ï¼‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸã€‚', 'success');
                // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
            }, 2000);
        }

        function requestPayout() {
            const payoutAmount = prompt('å‡ºé‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆç¾åœ¨ã®æ®‹é«˜: Â¥180,000ï¼‰ï¼š', '180000');
            if (payoutAmount && !isNaN(payoutAmount)) {
                if (confirm(`Â¥${parseInt(payoutAmount).toLocaleString()}ã‚’ç™»éŒ²å£åº§ã«å‡ºé‡‘ç”³è«‹ã—ã¾ã™ã‹ï¼Ÿ\n\næŒ¯è¾¼äºˆå®šæ—¥: ç¿Œå–¶æ¥­æ—¥\næŒ¯è¾¼å…ˆ: ã¿ãšã»éŠ€è¡Œ ***æ”¯åº— æ™®é€š ****123`)) {
                    showToast('å‡ºé‡‘ç”³è«‹ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚ç¿Œå–¶æ¥­æ—¥ã«æŒ¯ã‚Šè¾¼ã¾ã‚Œã¾ã™ã€‚', 'success');
                }
            }
        }

        // é€²æ—ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ›´æ–°
        function updateProgressStep(step) {
            const steps = document.querySelectorAll('.progress-step');
            steps.forEach((s, index) => {
                s.classList.remove('active', 'completed');
                if (index < step) {
                    s.classList.add('completed');
                } else if (index === step) {
                    s.classList.add('active');
                }
            });
        }

        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®è¿½è·¡ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function simulateLocationTracking() {
            const locations = [
                { lat: 35.6762, lng: 139.6503, address: 'æ±äº¬éƒ½æ–°å®¿åŒº' },
                { lat: 35.6544, lng: 139.7447, address: 'æ±äº¬éƒ½æ¸‹è°·åŒº' },
                { lat: 35.4437, lng: 139.6380, address: 'ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚' }
            ];
            
            let currentIndex = 0;
            setInterval(() => {
                if (document.getElementById('currentJob').style.display !== 'none' && currentIndex < locations.length) {
                    console.log('ç¾åœ¨ä½ç½®æ›´æ–°:', locations[currentIndex]);
                    currentIndex++;
                    
                    // é€²æ—ã‚’æ›´æ–°
                    if (currentIndex === 2) {
                        updateProgressStep(1); // è¼¸é€ä¸­
                    } else if (currentIndex === 3) {
                        updateProgressStep(2); // ç´è»Š
                    }
                }
            }, 30000); // 30ç§’ã”ã¨ã«æ›´æ–°
        }

        // ãƒ‡ãƒ¢ç”¨: è‡ªå‹•æ¡ˆä»¶è¿½åŠ 
        function addDemoJobs() {
            setTimeout(() => {
                const newJob = {
                    id: 'JOB006',
                    title: 'ãƒ¬ã‚¯ã‚µã‚¹ LS 2023å¹´',
                    price: 65000,
                    from: 'æ±äº¬éƒ½æ¸¯åŒº',
                    to: 'é™å²¡çœŒé™å²¡å¸‚',
                    distance: '180km',
                    time: '3æ™‚é–“',
                    date: '2024/06/15 8:00å¸Œæœ›',
                    company: 'é™å²¡ãƒ¬ã‚¯ã‚µã‚¹',
                    details: 'é«˜ç´šè»Šãƒ»è¦æ…é‡é‹è»¢',
                    payment: 'å³æ—¥æ”¯æ‰•ã„',
                    status: 'available'
                };
                
                jobsData.unshift(newJob);
                renderJobList();
                showToast('æ–°ç€ï¼é«˜å ±é…¬æ¡ˆä»¶ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ: ãƒ¬ã‚¯ã‚µã‚¹ LS Â¥65,000', 'success');
            }, 20000);
        }

        // åˆæœŸåŒ–æ™‚ã«è¿½åŠ 
        window.addEventListener('load', function() {
            renderJobList();
            scheduleNotifications();
            simulateLocationTracking();
            addDemoJobs();
            
            // é€šçŸ¥è¨±å¯ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
            if ('Notification' in window && Notification.permission === 'default') {
                Notification.requestPermission();
            }
        });
    </script>
</body>
</html>